/*!
 * Library: singulum
 * Description: State management sanity with minimal effort
 * Author: planttheidea
 * Version: 0.8.0
 * License: MIT
 */
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("singulum",[],e):"object"==typeof exports?exports.singulum=e():t.singulum=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";function r(t){return t&&t.__esModule?t:{"default":t}}Object.defineProperty(e,"__esModule",{value:!0});var o=n(2),i=r(o);e.default=new i.default,t.exports=e.default},function(t,e,n){"use strict";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=n(3),u=Object.freeze,c=0,a=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2],r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3];return e||(e=c,c++),(0,s.setReadonly)(t,e,new p(n,r)),t.$$store[e]=t[e],t[e]},f=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments.length<=2||void 0===arguments[2]?{}:arguments[2];(0,s.forEachObject)(n,function(e,n){t.$$initialValues[n]=e,t.$$store[n]=d(e)}),(0,s.forEachObject)(e,function(e,n){(0,s.isFunction)(e)?t.$$actions[n]=l(t,e):(0,s.isObject)(e)&&(0,s.forEachObject)(e,function(e,r){t.$$actions[r]=l(t,e,n)})})},l=function(t,e,n){return(0,s.bindFunction)(function(){for(var r=this,o=n?t.$$store[n]:t.$$store,i=arguments.length,u=Array(i),c=0;i>c;c++)u[c]=arguments[c];var a=e.apply(void 0,[o].concat(u));return(0,s.isFunction)(a.then)?a.then(function(t){return b(r,t,n)}):Promise.resolve(b(this,a,n))},t)},h=function(t){t.$$watchers.forEach(function(e){e(t.store)})},d=function(t){var e=(0,s.isClassInstance)(t);return e?Object.create(Object.getPrototypeOf(t),Object.getOwnPropertyNames(t).reduce(function(e,n){return e[n]=Object.getOwnPropertyDescriptor(t,n),e},{})):(0,s.getClone)(t,y)},b=function(t,e,n){return n?t.$$store[n]=e:t.$$store=e,t.store=$(t.$$store),h(t),e},v=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return o(this,t),(0,s.forEachObject)(n,function(t,r){(0,s.setImmutable)(e,r,n[r])}),u(this),this}return i(t,[{key:"log",value:function(){console}}]),t}(),$=function(t){return(0,s.isProduction)()?t:new y(t)},y=function(){function t(){var e=this,n=arguments.length<=0||void 0===arguments[0]?{}:arguments[0];return o(this,t),(0,s.forEachObject)(n,function(t,n){(0,s.setImmutable)(e,n,(0,s.isInstanceOf)(t,p)?t.store:t)}),u(this),this}return i(t,[{key:"log",value:function(){console}}]),t}(),g=function O(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=this,n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],r=arguments[2];return o(this,O),(0,s.forEachObject)(t,function(t,o){var i=n[o];e[o]=(0,s.isInstanceOf)(i,p)&&r?new O(i.store,i.$$store,r):(0,s.getClone)(i,y)}),this},p=function(){function t(){var e=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];return o(this,t),(0,s.setHidden)(this,"$$actions",[]),(0,s.setHidden)(this,"$$initialValues",{}),(0,s.setHidden)(this,"$$watchers",[]),(0,s.setHidden)(this,"$$snapshots",{}),(0,s.setHidden)(this,"$$store",{}),f(this,e,n),this.actions=(0,s.isProduction)()?this.$$actions:new v(this.$$actions),this.store=$(this.$$store),this}return i(t,[{key:"branch",value:function(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2];return n&&!(0,s.isString)(n)&&(n=n.toString()),a(this,n,t,e)}},{key:"equals",value:function(t,e){return e?(0,s.isEqual)(this.$$store[e],t):(0,s.isEqual)(this.$$store,t)}},{key:"hashCode",value:function(t){return t?(0,s.hashCode)(this.$$store[t]):(0,s.hashCode)(this.$$store)}},{key:"reset",value:function(){var e=this,n=arguments.length<=0||void 0===arguments[0]?!1:arguments[0],r={};return(0,s.forEachObject)(this.$$store,function(o,i){(0,s.isInstanceOf)(o,t)&&n?o.reset():(0,s.isInstanceOf)(o,g)||(r[i]=e.$$initialValues[i])}),this.$$store=r,this.store=$(this.$$store),h(this),this}},{key:"restore",value:function(t){var e=this,n=arguments.length<=1||void 0===arguments[1]?!1:arguments[1];return(0,s.isInstanceOf)(t,g)||(0,s.throwError)("Snapshot used in restore method must be a SingulumSnapshot."),(0,s.forEachObject)(t,function(t,r){(0,s.isInstanceOf)(t,g)&&n?e.$$store[r].restore(t,n):(0,s.isInstanceOf)(t,y)||(e.$$store[r]=t)}),this.store=$(this.$$store),h(this),this}},{key:"snapshot",value:function(){var t=arguments.length<=0||void 0===arguments[0]?!1:arguments[0];return new g(this.store,this.$$store,t)}},{key:"unwatch",value:function(t){var e=(0,s.findIndex)(this.$$watchers,function(e){return e===t});return this.$$watchers=[].concat(r(this.$$watchers.slice(0,e)),r(this.$$watchers.slice(e+1,this.$$watchers.length))),this}},{key:"watch",value:function(t){return(0,s.isFunction)(t)&&(this.$$watchers=[].concat(r(this.$$watchers),[t])),this}}]),t}();e.default=p,t.exports=e.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},o=Object.defineProperty,i=Object.getOwnPropertyNames,s=Object.prototype.toString,u=e.bindFunction=function(t,e){return function(){for(var n=arguments.length,r=Array(n),o=0;n>o;o++)r[o]=arguments[o];return t.apply(e,r)}},c=e.findIndex=function(t,e){for(var n=0,r=t.length;r>n;n++)if(e(t[n],n,t))return n;return-1},a=e.forEachObject=function(t,e){for(var n=Object.keys(t),r=0,o=n.length;o>r;r++){var i=n[r];e(t[i],i,t)}},f=e.getClone=function x(t,e){if(d(t))return t.map(function(t){return x(t,e)});if(p(t)){var n=function(){var n={};return a(t,function(t,r){n[r]=x(t,e)}),g(t,e)&&(n=new e(n)),{v:n}}();if("object"===("undefined"==typeof n?"undefined":r(n)))return n.v}return v(t)?new Date(t.valueOf()):t},l=e.getMutableObject=function(t){var e=d(t);if(!e&!p(t))return t;var n=e?[]:{};return e?t.forEach(function(e,r){E(t,r,n)}):a(t,function(e,r){E(t,r,n)}),n},h=e.hashCode=function C(t){var e=w(t);if(""===e)return 0;for(var C=0,n=void 0,r=0,o=e.length;o>r;r++)n=e.charCodeAt(r),C=(C<<5)-C+n,C|=0;return C},d=e.isArray=function(t){return"[object Array]"===s.call(t)},b=e.isClassInstance=function(t){return p(t)&&Object.getPrototypeOf(t).constructor!==Object.prototype.constructor},v=e.isDate=function(t){return"[object Date]"===s.call(t)},$=e.isEqual=function(t,e){return h(t)===h(e)},y=e.isFunction=function(t){return"[object Function]"===s.call(t)||"function"==typeof t},g=e.isInstanceOf=function(t,e){return t instanceof e},p=e.isObject=function(t){return"[object Object]"===s.call(t)&&!!t},O=e.isProduction=function(){return!0},j=e.isString=function(t){return"[object String]"===s.call(t)},m=e.setHidden=function(t,e,n){o(t,e,{configurable:!0,enumerable:!1,value:n,writable:!0})},w=function S(t){var e="undefined"==typeof t?"undefined":r(t),n="";if("object"===e)for(var o in t)n+="{"+e+":"+o+S(t[o])+"}";else n+="function"===e?"{"+e+":"+t.toString()+"}":"{"+e+":"+t+"}";return n.replace(/\s/g,"")},E=function(t,e,n){var r=Object.getOwnPropertyDescriptor(t,e)||{},i=t[e];(d(i)||p(i))&&(i=l(i)),o(n,e,{configurable:!0,enumerable:r.enumerable||!0,value:i,writable:!0})},I=e.setImmutable=function A(t,e,n){var r=arguments.length<=3||void 0===arguments[3]?{}:arguments[3],s=void 0;switch(!0){case d(n):s=[],n.forEach(function(t,e){A(s,e,t)});break;case p(n):s={},i(n).forEach(function(t){A(s,t,n[t])});break;case v(n):s=n.valueOf();break;case y(n):s=function(){for(var t=arguments.length,e=Array(t),r=0;t>r;r++)e[r]=arguments[r];return n.apply(this,e)},a(n,function(t,e){n.hasOwnProperty(e)&&A(s,e,t)});break;default:s=n}return o(t,e,{get:function(){return s},set:function(){throw new SyntaxError("You are trying to set a value on an immutable object which is not allowed. Check the assignment of property "+e+".")},configurable:!1,enumerable:r.enumerable||!0}),t[e]},k=e.setReadonly=function(t,e,n){o(t,e,{get:function(){return n},set:function(){P("Cannot set a value for "+e+", as it is immutable.")}})},P=e.throwError=function(t){throw new Error(t)};e.default={bindFunction:u,findIndex:c,forEachObject:a,getClone:f,getMutableObject:l,hashCode:h,isArray:d,isClassInstance:b,isDate:v,isEqual:$,isFunction:y,isInstanceOf:g,isObject:p,isProduction:O,isString:j,setHidden:m,setImmutable:I,setReadonly:k,throwError:P}}])});